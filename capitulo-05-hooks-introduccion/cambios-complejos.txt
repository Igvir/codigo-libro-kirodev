refactor(api): restructure product endpoints for better performance

Previous implementation was making multiple database queries per request.
New structure uses joins and reduces queries from 5 to 1 per product list.

Performance improvement: ~200ms  ~40ms average response time.

Related: #145
